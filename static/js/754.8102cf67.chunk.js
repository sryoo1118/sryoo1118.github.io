"use strict";(self.webpackChunkigaworks=self.webpackChunkigaworks||[]).push([[754],{754:(e,n,t)=>{t.r(n),t.d(n,{default:()=>N});var o=t(168),a=t(2791),r=t(3457),c=t.n(r);const i=t(5294).Z.create({baseURL:"https://static.adbrix.io/front/coding-test"});i.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),i.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)}));const s=i,d={getInfoList:()=>s({url:"/event_1.json",method:"GET"}),getChartList:()=>s({url:"/event_3.json",method:"GET"}),getCountryList:()=>s({url:"event_4.json",method:"GET"})};var l,u,p,h,f,g=t(2554),y=t(4702);const x=e=>{let{data:n}=e;const t=e=>e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");return(0,y.BX)("div",{css:(0,g.iv)(l||(l=(0,o.Z)(["\n              display: flex;\n              flex-direction: column;\n              justify-content: space-between;\n              height: 100%;\n              padding: 10px 15px;\n              background-color: #fff;\n              text-align: left;\n            "]))),children:[(0,y.tZ)("p",{css:(0,g.iv)(u||(u=(0,o.Z)(["\n            color: #66ADE5;\n            font-weight: 600;\n            "]))),children:"\uc811\uc18d\uc720\uc800"}),(0,y.BX)("p",{children:[(0,y.tZ)("span",{css:(0,g.iv)(p||(p=(0,o.Z)(["\n                    font-size: 12px;\n                    color: #999;\n                    background-color: #e6e6e6;\n                    padding: 4px;\n                    border-radius: 3px;\n                  "]))),children:"SUM"}),(0,y.tZ)("span",{css:(0,g.iv)(h||(h=(0,o.Z)(["\n                    color: #999;\n                    padding-left: 10px;\n                  "]))),children:"Unique Event Count"})]}),(0,y.tZ)("p",{css:(0,g.iv)(f||(f=(0,o.Z)(["\n              font-size: 26px;\n              font-weight: 600;\n            "]))),children:n.length&&(()=>{let e=0;return n.forEach((n=>{e+=parseInt(n[1],10)})),t(e)})()}),(0,y.tZ)("p",{children:n.length&&(e=>{const n=[...e].sort(((e,n)=>new Date(n[0])-new Date(e[0]))),o=n[0],a=parseInt(o[1],10),r=n.length>1?parseInt(n[1][1],10):0;return t(a-r)})(n)})]})};var m,Z,w,v,k;const b=e=>{let{data:n}=e;const t=e=>e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");return(0,y.BX)("div",{css:(0,g.iv)(m||(m=(0,o.Z)(["\n              display: flex;\n              flex-direction: column;\n              justify-content: space-between;\n              height: 100%;\n              padding: 10px 15px;\n              background-color: #fff;\n              text-align: left;\n            "]))),children:[(0,y.tZ)("p",{css:(0,g.iv)(Z||(Z=(0,o.Z)(["\n            color: #66ADE5;\n            font-weight: 600;\n            "]))),children:"\uc811\uc18d\ud69f\uc218"}),(0,y.BX)("p",{children:[(0,y.tZ)("span",{css:(0,g.iv)(w||(w=(0,o.Z)(["\n                    font-size: 12px;\n                    color: #999;\n                    background-color: #e6e6e6;\n                    padding: 4px;\n                    border-radius: 3px;\n                  "]))),children:"SUM"}),(0,y.tZ)("span",{css:(0,g.iv)(v||(v=(0,o.Z)(["\n                    color: #999;\n                    padding-left: 10px;\n                  "]))),children:"Total Event Count"})]}),(0,y.tZ)("p",{css:(0,g.iv)(k||(k=(0,o.Z)(["\n              font-size: 26px;\n              font-weight: 600;\n            "]))),children:n.length&&(e=>{let n=0;return e.forEach((e=>{n+=parseInt(e[2],10)})),t(n)})(n)}),(0,y.tZ)("p",{children:n.length&&(e=>{const n=[...e].sort(((e,n)=>new Date(n[0])-new Date(e[0]))),o=n[0],a=parseInt(o[2],10),r=n.length>1?parseInt(n[2][2],10):0;return t(a-r)})(n)})]})};var F,E,I=t(4706),D=t(2839),B=t(466),S=t(2891),C=t(5667),j=t(7281),X=t(3782),R=t(3142);const A=e=>{let{data:n}=e;const t=n.sort(((e,n)=>new Date(e[0])-new Date(n[0])));return(0,y.BX)("div",{css:(0,g.iv)(F||(F=(0,o.Z)(["\n              display: flex;\n              flex-direction: column;\n              justify-content: space-between;\n              height: 100%;\n              padding: 10px 15px;\n              background-color: #fff;\n              text-align: left;\n            "]))),children:[(0,y.tZ)("p",{css:(0,g.iv)(E||(E=(0,o.Z)(["\n            color: #66ADE5;\n            font-weight: 600;\n            "]))),children:"DAU"}),(0,y.BX)(I.c,{width:800,height:400,data:t,children:[(0,y.tZ)(D.q,{strokeDasharray:"3 3"}),(0,y.tZ)(B.K,{dataKey:(e,n)=>n}),(0,y.tZ)(S.B,{tickFormatter:e=>"".concat(e/1e3,"k")}),(0,y.tZ)(C.u,{}),(0,y.tZ)(j.D,{}),(0,y.tZ)(X.$,{dataKey:e=>parseInt(e[1]),fill:"#8884d8",name:"Unique Event Count"}),(0,y.tZ)(R.x,{type:"monotone",dataKey:e=>parseInt(e[2]),stroke:"#82ca9d",name:"Total Event Count"})]})]})};var L,T,K=t(3909),U=t(1041),q=t(1048);const z=()=>{const[e,n]=(0,a.useState)([]);(0,a.useEffect)((()=>{t()}),[]);const t=()=>{d.getChartList().then((e=>{"ok"===e.data.message&&n(e.data.data.rows)}))},r=e.map((e=>{const[n,t]=e;return[!["www.google.com","adbrix.io","console.dfinery.io","www.dfinery.io"].includes(n)?"etc":n,parseInt(t)]})),c=Object.values(r.reduce(((e,n)=>{let[t,o]=n;return e[t]=e[t]||{category:t,value:0},e[t].value+=o,e}),{})),i=["#0088FE","#00C49F","#FFBB28","#FF8042","#AF19FF","#4D4D4D","#FF7F7F","#7FBFFF","#4DFFE0","#FFD700"];return(0,y.BX)("div",{css:(0,g.iv)(L||(L=(0,o.Z)(["\n              display: flex;\n              flex-direction: column;\n              justify-content: space-between;\n              height: 100%;\n              background-color: #fff;\n              text-align: left;\n            "]))),children:[(0,y.tZ)("p",{css:(0,g.iv)(T||(T=(0,o.Z)(["\n            color: #66ADE5;\n            font-weight: 600;\n            padding: 10px 15px;\n            "]))),children:"Top Referral"}),(0,y.BX)(K.u,{width:400,height:400,children:[(0,y.tZ)(U.b,{data:c,dataKey:"value",cx:170,cy:150,outerRadius:80,fill:"#8884d8",label:e=>"etc"===e.payload.category?"etc":e.payload.category,children:c.map(((e,n)=>(0,y.tZ)(q.b,{fill:i[n%i.length]},"cell-".concat(n))))}),(0,y.tZ)(C.u,{})]})]})};var G,H,M,_=t(1322);const O=()=>{const[e,n]=(0,a.useState)([]);(0,a.useEffect)((()=>{t()}),[]);const t=()=>{d.getCountryList().then((e=>{"ok"===e.data.message&&n(e.data.data.rows)}))},[r,c]=(0,a.useState)([]),[i,s]=(0,a.useState)(null),l=e.reduce(((e,n)=>{const t=n[0]||"empty",o=n[1]||"empty",a=n[2]||"empty",r=parseInt(n[3],10);e[t]||(e[t]={total:0,cities:[]}),e[t].total+=r;const c=e[t].cities.find((e=>e.name===o));if(c){c.total+=r;const e=c.regions.find((e=>e.name===a));e?e.count+=r:c.regions.push({name:a,count:r})}else e[t].cities.push({name:o,total:r,regions:[{name:a,count:r}]});return e}),{}),u=Object.keys(l).map((e=>({key:e,country:e,total:l[e].total,cities:l[e].cities}))),p=[{title:"GroupBy",dataIndex:"country",key:"country",sorter:(e,n)=>e.country.localeCompare(n.country)},{title:"Metrics",dataIndex:"total",key:"total",render:e=>f(e),sorter:(e,n)=>e.total-n.total}],h=(e,n)=>{s(n),c([e.key])},f=e=>e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");return(0,y.BX)("div",{css:(0,g.iv)(G||(G=(0,o.Z)(["\n              display: flex;\n              flex-direction: column;\n              justify-content: space-between;\n              height: 100%;\n              padding: 10px 15px;\n              background-color: #fff;\n              text-align: left;\n            "]))),children:[(0,y.tZ)("p",{css:(0,g.iv)(H||(H=(0,o.Z)(["\n            color: #66ADE5;\n            font-weight: 600;\n            "]))),children:"Top Referral"}),(0,y.BX)("div",{css:(0,g.iv)(M||(M=(0,o.Z)(["overflow-y: scroll;"]))),children:[(0,y.tZ)(_.Z,{dataSource:u,columns:p,expandedRowRender:e=>{const n=[{dataIndex:"name",key:"name",render:(n,t)=>(0,y.tZ)("a",{onClick:()=>h(e,t),children:n})},{dataIndex:"total",key:"total",render:e=>f(e)}],t=e.cities.map((e=>({key:e.name,...e})));return(0,y.tZ)(_.Z,{columns:n,dataSource:t,pagination:!1,showHeader:!0,expandedRowRender:e=>{const n=[{dataIndex:"name",key:"name"},{dataIndex:"count",key:"count",render:e=>f(e)}],t=e.regions.map((e=>({key:e.name,...e})));return(0,y.tZ)(_.Z,{columns:n,dataSource:t,pagination:!1})}})},onExpand:(e,n)=>c(e?[n.key]:[]),expandedRowKeys:r,pagination:!1,showHeader:!0}),i&&(0,y.tZ)(_.Z,{columns:[{dataIndex:"name",key:"name"},{dataIndex:"count",key:"count"}],dataSource:i.regions.map((e=>({key:e.name,...e}))),pagination:!1})]})]})};var P;const N=()=>{const[e,n]=(0,a.useState)([]),t=[{i:"a",x:0,y:0,w:2,h:5,component:x},{i:"b",x:2,y:0,w:2,h:5,component:b},{i:"c",x:0,y:1,w:6,h:12,component:A},{i:"d",x:0,y:2,w:2,h:10,component:z},{i:"e",x:2,y:2,w:2,h:10,component:O}];(0,a.useEffect)((()=>{r()}),[]);const r=()=>{d.getInfoList().then((e=>{"ok"===e.data.message&&n(e.data.data.rows)}))};return(0,y.tZ)(c(),{className:"layout",layout:t,cols:5,rowHeight:30,width:1e3,css:(0,g.iv)(P||(P=(0,o.Z)(["\n        background-color: #d9d9d9;\n      "]))),children:t.map((n=>(0,y.tZ)("div",{children:n.component?(0,y.tZ)(n.component,{data:e}):null},n.i)))})}}}]);
//# sourceMappingURL=754.8102cf67.chunk.js.map